<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japan Travel</title>
    <!-- 引入 Swiper 的 CSS -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    
    <!-- 引用我们自己的外部样式表 -->
    <link rel="stylesheet" href="styleForIndex.css">
</head>
<body>

    <!-- ======== 导航栏 ======== -->
    <header class="navbar">
        <div class="container">
            <a href="#" class="logo">圆周旅迹</a>
            <div class="hamburger-menu">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <nav class="nav-links">
                <a href="#slider-container">Featured Topics</a>
                <a href="#my-trips">My Trips</a>
            </nav>
            
            <div class="nav-auth">
                <a href="login.html" class="login">Log in</a>
                <!-- “注册”按钮已被移除 -->
            </div>
        </div>
    </header>

    <!-- 主内容区 -->
    <main>
        <!-- 滑块容器 -->
        <div id="slider-container" class="container">
            <h2>Featured Topics</h2>
            <div class="swiper-container">
                <div class="swiper-wrapper">
                    <!-- Slide 1: Tokyo -->
                    <div class="swiper-slide" data-city="Tokyo" data-lat="35.6895" data-lon="139.6917" data-zoom="12">
                        <img src="images/tokyo.png" alt="Tokyo">
                        <div class="slide-caption">Tokyo</div>
                    </div>
                    <!-- Slide 2: Osaka -->
                    <div class="swiper-slide" data-city="Osaka" data-lat="34.6937" data-lon="135.5023" data-zoom="12">
                        <img src="images/osaka.png" alt="Osaka">
                         <div class="slide-caption">Osaka</div>
                    </div>
                    <!-- Slide 3: Kyoto -->
                    <div class="swiper-slide" data-city="Kyoto" data-lat="35.0116" data-lon="135.7681" data-zoom="12">
                        <img src="images/kyoto.png" alt="Kyoto">
                         <div class="slide-caption">Kyoto</div>
                    </div>
                    <!-- 复制的滑块 -->
                    <div class="swiper-slide" data-city="Tokyo" data-lat="35.6895" data-lon="139.6917" data-zoom="12">
                        <img src="images/tokyo.png" alt="Tokyo">
                        <div class="slide-caption">Tokyo</div>
                    </div>
                    <div class="swiper-slide" data-city="Osaka" data-lat="34.6937" data-lon="135.5023" data-zoom="12">
                        <img src="images/osaka.png" alt="Osaka">
                         <div class="slide-caption">Osaka</div>
                    </div>
                    <div class="swiper-slide" data-city="Kyoto" data-lat="35.0116" data-lon="135.7681" data-zoom="12">
                        <img src="images/kyoto.png" alt="Kyoto">
                         <div class="slide-caption">Kyoto</div>
                    </div>
                </div>
                <div class="swiper-pagination"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
        </div>

        <!-- 我的行程展示区 -->
        <div id="my-trips" class="container">
            <h2>My Trips</h2>
            <div id="my-trips-list">
                <!-- 由JavaScript创建的卡片式行程将插入这里 -->
            </div>
        </div>
    </main>

    <!-- +号按钮 -->
    <button id="add-trip-btn">+</button>

    <!-- 创建我的行程弹窗 -->
    <div id="trip-modal">
        <div class="modal-content">
            <div class="modal-title">Create My Trip</div>
            <label>Where do you want to go?</label>
            <input id="trip-city" type="text" placeholder="Enter city">
            <label>How long do you want to go?</label>
            <div class="date-picker-group">
                <div class="date-picker-item">
                    <div class="date-label">Departure date</div>
                    <input id="trip-date-from" type="date">
                </div>
                <div class="date-picker-item">
                    <div class="date-label">Return date</div>
                    <input id="trip-date-to" type="date">
                </div>
            </div>
            <div class="modal-actions">
                <button id="trip-cancel">Cancel</button>
                <button id="trip-confirm">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Swiper 和脚本 -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- 导航栏逻辑 ---
            const hamburger = document.querySelector('.hamburger-menu');
            const navLinks = document.querySelector('.nav-links');
            const navAuth = document.querySelector('.nav-auth');
            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navLinks.classList.toggle('active');
                navAuth.classList.toggle('active');
            });
            
            // --- Swiper 逻辑 ---
            const swiper = new Swiper('.swiper-container', {
                loop: true,
                loopedSlides: 3,
                slidesPerView: 1.5,
                spaceBetween: 10,
                centeredSlides: true,
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true, // 允许点击分页器切换
                },
                 breakpoints: {
                    768: {
                        slidesPerView: 3,
                        spaceBetween: 30
                    }
                }
            });

            document.querySelectorAll('.swiper-slide').forEach(slide => {
                slide.addEventListener('click', function () {
                    const city = this.dataset.city;
                    const lat = this.dataset.lat;
                    const lon = this.dataset.lon;
                    const zoom = this.dataset.zoom;
                    const url = `detail.html?city=${encodeURIComponent(city)}&lat=${lat}&lon=${lon}&zoom=${zoom}`;
                    window.location.href = url;
                });
            });

            // --- 弹窗和行程创建逻辑 ---
            const addTripBtn = document.getElementById('add-trip-btn');
            const tripModal = document.getElementById('trip-modal');
            const tripCancel = document.getElementById('trip-cancel');
            const tripConfirm = document.getElementById('trip-confirm');
            const tripCity = document.getElementById('trip-city');
            const tripDateFrom = document.getElementById('trip-date-from');
            const tripDateTo = document.getElementById('trip-date-to');
            
            addTripBtn.onclick = () => {
                tripModal.style.display = 'flex';
                tripCity.value = '';
                tripDateFrom.value = '';
                tripDateTo.value = '';
            };
            tripCancel.onclick = () => {
                tripModal.style.display = 'none';
            };
            tripConfirm.onclick = () => {
                const city = tripCity.value.trim();
                const dateFrom = tripDateFrom.value;
                const dateTo = tripDateTo.value;
                if (!city || !dateFrom || !dateTo) {
                    alert('Please fill in all fields');
                    return;
                }
                if (new Date(dateFrom) > new Date(dateTo)) {
                    alert('Return date must be after departure date');
                    return;
                }
                const url = `mytrip.html?city=${encodeURIComponent(city)}&from=${dateFrom}&to=${dateTo}`;
                window.location.href = url;
            };
            tripModal.onclick = (e) => {
                if (e.target === tripModal) {
                    tripModal.style.display = 'none';
                }
            };
        });
    </script>
</body>
</html>